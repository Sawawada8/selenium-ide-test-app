import type { NextPage } from 'next';
import Head from 'next/head';
import Image from 'next/image';
// import styles from '../styles/Home.module.css';
import axios from 'axios';

import { Box } from '@chakra-ui/react';

import { Title } from '../components/Atoms/AtomsImport';
import {} from '../components/Molecules/MoleculesImport';
import { ListTable } from '../components/Organisms/OrganismsImport';
import { SidebarLayout } from '../components/Templates/TemplatesImport';

const Home: NextPage = () => {
  const handleClick = () => {
    const loginParams = { email: 'example@gmail.com', password: 'password' };
    axios.defaults.withCredentials = true;
    axios
      // CSRF保護の初期化
      .get('http://localhost:8080/sanctum/csrf-cookie', {
        withCredentials: true,
      })
      .then(response => {
        console.log({ response, aaa: 'csrt token hakkou' });
        // ログイン処理
        axios
          .post('http://localhost:8080/login', loginParams, {
            withCredentials: true,
          })
          .then(response => {
            console.log(response.data);
          });
      });
  };

  return (
    <div>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/sele.svg" />
      </Head>

      <SidebarLayout
        mainContent={
          <Box p={5}>
            <Title title="hello" />
            <ListTable />
            <button onClick={handleClick}>login</button>
          </Box>
        }
      />
    </div>
  );
};

export default Home;
